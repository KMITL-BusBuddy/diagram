@startuml user_login

hide footbox

actor User
participant "Login Page" as UI
participant "Django\nURL Dispatcher" as API
participant "LoginView" as view_login
participant "UserSerializer" as serializer_user
database "users" as table_users

== User Login ==
activate User
activate UI
User -> UI: Enter username & password
User -> UI: Tap Login button

UI -> UI: Validate input

alt Valid input
    UI -> API: POST auth/login/ (username, password)
    activate API

    API -> view_login: post(request)
    activate view_login

    view_login -> serializer_user: validate(data)
    activate serializer_user

    serializer_user -> table_users: check_credentials(username, password, is_active=True)
    activate table_users

    table_users --> serializer_user: user_data
    deactivate table_users

    serializer_user --> view_login: valid_user / error
    deactivate serializer_user

    alt Authentication successful
        view_login -> view_login: create_session(user)
        view_login --> API: 200 OK (jwt token)
        deactivate view_login
        deactivate API

        UI -> UI: Navigate to HomePage
    else Authentication failed
        view_login --> API: 401 Unauthorized
        deactivate view_login
        deactivate API

        UI -> User: Show error message
    end
end

deactivate UI
deactivate User

@enduml
